{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/dci/UIBasics/dbs/mongoose/frontend/src/components/update.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { loginContext } from \"./context\";\nimport UpdateSuccess from \"./alerts/updateSuccess\";\nexport default function Update() {\n  _s();\n\n  const [user, setUser] = useState({});\n  const {\n    userInfo,\n    setUserInfo\n  } = useContext(loginContext);\n  const {\n    isUpdated,\n    setIsUpdated\n  } = useState(false);\n\n  const getValue = e => {\n    setUser(() => {\n      return { ...user,\n        [e.target.name]: e.target.value\n      };\n    });\n  };\n\n  const submitHandler = e => {\n    setIsUpdated(false);\n    e.preventDefault();\n    axios({\n      method: \"PUT\",\n      url: \"/users/update\",\n      data: user\n    }).then(response => {\n      console.log(response);\n      response.data.updated ? setIsUpdated(true) : setIsUpdated(false);\n      setUserInfo({\n        name: response.data.name,\n        spiritAnimal: response.data.spiritAnimal,\n        email: response.data.email\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: isUpdated ? /*#__PURE__*/_jsxDEV(UpdateSuccess, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Profile page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Hi there \", userInfo.name, \", you beautiful \", userInfo.spiritAnimal, \". Something is different, perhaps?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => {\n          submitHandler(e);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"updateEmail\",\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: \"form-control\",\n            id: \"updateEmail\",\n            placeholder: \"{}\",\n            name: \"email\",\n            onChange: getValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"updatePassword\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control\",\n            id: \"updatePassword\",\n            placeholder: \"Password\",\n            name: \"password\",\n            onChange: getValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"updateNeWPassword\",\n            children: \"New Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"Password\",\n            className: \"form-control\",\n            id: \"updateNewPassword\",\n            placeholder: \"New Password\",\n            name: \"newPassword\",\n            onChange: getValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"updateName\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"updateName\",\n            placeholder: \"Name\",\n            name: \"name\",\n            onChange: getValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"updateSpiritAnimal\",\n            children: \"Spirit Animal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"updateSpiritAnimal\",\n            placeholder: \"Spirit Animal\",\n            name: \"spiritAnimal\",\n            onChange: getValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"submit\",\n          className: \"btn btn-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Update, \"h35caFQwxGdMHk6hExIO7UFiiDM=\");\n\n_c = Update;\n\nvar _c;\n\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"sources":["/home/dci/UIBasics/dbs/mongoose/frontend/src/components/update.js"],"names":["React","useState","useContext","axios","loginContext","UpdateSuccess","Update","user","setUser","userInfo","setUserInfo","isUpdated","setIsUpdated","getValue","e","target","name","value","submitHandler","preventDefault","method","url","data","then","response","console","log","updated","spiritAnimal","email","catch","error"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { loginContext } from \"./context\";\nimport UpdateSuccess from \"./alerts/updateSuccess\";\n\nexport default function Update() {\n  const [user, setUser] = useState({});\n  const { userInfo, setUserInfo } = useContext(loginContext);\n  const { isUpdated, setIsUpdated } = useState(false);\n\n  const getValue = (e) => {\n    setUser(() => {\n      return { ...user, [e.target.name]: e.target.value };\n    });\n  };\n\n  const submitHandler = (e) => {\n    setIsUpdated(false);\n    e.preventDefault();\n    axios({\n      method: \"PUT\",\n      url: \"/users/update\",\n      data: user,\n    })\n      .then((response) => {\n        console.log(response);\n        response.data.updated ? setIsUpdated(true) : setIsUpdated(false);\n        setUserInfo({\n          name: response.data.name,\n          spiritAnimal: response.data.spiritAnimal,\n          email: response.data.email,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  return (\n    <main>\n      {isUpdated ? (\n        <UpdateSuccess/>\n      ) : (\n        <div>\n          <h1>Profile page</h1>\n          <p>\n            Hi there {userInfo.name}, you beautiful {userInfo.spiritAnimal}.\n            Something is different, perhaps?\n          </p>\n          <form\n            onSubmit={(e) => {\n              submitHandler(e);\n            }}\n          >\n            <div className=\"form-group\">\n              <label htmlFor=\"updateEmail\">Email address</label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"updateEmail\"\n                placeholder=\"{}\"\n                name=\"email\"\n                onChange={getValue}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"updatePassword\">Password</label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                id=\"updatePassword\"\n                placeholder=\"Password\"\n                name=\"password\"\n                onChange={getValue}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"updateNeWPassword\">New Password</label>\n              <input\n                type=\"Password\"\n                className=\"form-control\"\n                id=\"updateNewPassword\"\n                placeholder=\"New Password\"\n                name=\"newPassword\"\n                onChange={getValue}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"updateName\">Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"updateName\"\n                placeholder=\"Name\"\n                name=\"name\"\n                onChange={getValue}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"updateSpiritAnimal\">Spirit Animal</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"updateSpiritAnimal\"\n                placeholder=\"Spirit Animal\"\n                name=\"spiritAnimal\"\n                onChange={getValue}\n              />\n            </div>\n            <input type=\"submit\" value=\"submit\" className=\"btn btn-primary\" />\n          </form>\n        </div>\n      )}\n    </main>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}